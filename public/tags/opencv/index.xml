<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>OpenCV on RyanLabs</title><link>https://jongyongpark.github.io/tags/opencv/</link><description>Recent content in OpenCV on RyanLabs</description><generator>Hugo -- 0.142.0</generator><language>ko-kr</language><lastBuildDate>Thu, 20 Feb 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://jongyongpark.github.io/tags/opencv/index.xml" rel="self" type="application/rss+xml"/><item><title>OpenCV compile on Windows</title><link>https://jongyongpark.github.io/posts/developer/opencv-win/</link><pubDate>Thu, 20 Feb 2025 00:00:00 +0000</pubDate><guid>https://jongyongpark.github.io/posts/developer/opencv-win/</guid><description>&lt;h1 id="claude">Claude&lt;/h1>
&lt;p>이 오류는 ARM64 플랫폼을 위한 CMake 구성 과정에서 발생한 문제입니다. 주요 오류는 프로젝트 설정이 제대로 되지 않았고, ARM64 플랫폼 구성이 올바르지 않다는 것입니다.&lt;/p>
&lt;p>PowerShell 스크립트를 다음과 같이 수정하여 해결할 수 있습니다:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-powershell" data-lang="powershell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># OpenCV Windows Build Script for x64 and ARM64&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Prerequisites: Visual Studio 2022, CMake, Git&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$OPENCV_VERSION = &lt;span style="color:#e6db74">&amp;#34;4.9.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$SOURCE_DIR = &lt;span style="color:#e6db74">&amp;#34;C:\workspace\jonpark-work\opencv_source&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$BUILD_BASE_DIR = &lt;span style="color:#e6db74">&amp;#34;C:\workspace\jonpark-work\opencv_build&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$INSTALL_BASE_DIR = &lt;span style="color:#e6db74">&amp;#34;C:\workspace\jonpark-work\opencv_install&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Common CMake parameters&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$CMAKE_COMMON_PARAMS = @(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-DCMAKE_MINIMUM_REQUIRED_VERSION=3.10&amp;#34;&lt;/span>, &lt;span style="color:#75715e"># 최소 CMake 버전 지정&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-DBUILD_SHARED_LIBS=ON&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-DBUILD_TESTS=OFF&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-DBUILD_PERF_TESTS=OFF&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-DBUILD_EXAMPLES=OFF&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-DWITH_CUDA=OFF&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-DBUILD_opencv_world=ON&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-DBUILD_opencv_python2=OFF&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-DBUILD_opencv_python3=OFF&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-DWITH_IPP=ON&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-DENABLE_CXX11=ON&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-DOPENCV_ENABLE_NONFREE=ON&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-DBUILD_WITH_STATIC_CRT=OFF&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Download OpenCV source&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> (&lt;span style="color:#f92672">-not&lt;/span> (Test-Path $SOURCE_DIR)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git clone https&lt;span style="color:#960050;background-color:#1e0010">:&lt;/span>//github.com/opencv/opencv.git $SOURCE_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Push-Location $SOURCE_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git checkout $OPENCV_VERSION
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Pop-Location
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Function to build OpenCV for specific architecture&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">function&lt;/span> Build-OpenCV {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">param&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#66d9ef">string&lt;/span>]$arch,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#66d9ef">string&lt;/span>]$generator,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#66d9ef">string&lt;/span>]$platform
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $BUILD_DIR = &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$BUILD_BASE_DIR&lt;span style="color:#e6db74">\&lt;/span>$arch&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $INSTALL_DIR = &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$INSTALL_BASE_DIR&lt;span style="color:#e6db74">\&lt;/span>$arch&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># Remove existing build directory to ensure clean build&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (Test-Path $BUILD_DIR) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Remove-Item -Path $BUILD_DIR -Recurse -Force
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># Create build directory&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> New-Item -ItemType Directory -Force -Path $BUILD_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Push-Location $BUILD_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># Configure CMake with explicit project name and build type&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cmake -G $generator -A $platform `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -DCMAKE_INSTALL_PREFIX=&lt;span style="color:#e6db74">&amp;#34;&lt;/span>$INSTALL_DIR&lt;span style="color:#e6db74">&amp;#34;&lt;/span> `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -DCMAKE_BUILD_TYPE=Release `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -DOpenCV_ARCH=$platform `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -DOpenCV_RUNTIME=vc17 `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $CMAKE_COMMON_PARAMS `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -S $SOURCE_DIR -B $BUILD_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> ($LASTEXITCODE &lt;span style="color:#f92672">-ne&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Write-Error &lt;span style="color:#e6db74">&amp;#34;CMake configuration failed for &lt;/span>$arch&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Pop-Location
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> exit &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># Build and install&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cmake --build $BUILD_DIR --config Release --target INSTALL --parallel &lt;span style="color:#ae81ff">8&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> ($LASTEXITCODE &lt;span style="color:#f92672">-ne&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Write-Error &lt;span style="color:#e6db74">&amp;#34;Build failed for &lt;/span>$arch&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Pop-Location
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> exit &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Pop-Location
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 빌드 전 Visual Studio 환경 설정&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$VS_PATH = &lt;span style="color:#e6db74">&amp;#34;C:\Program Files\Microsoft Visual Studio\2022\Community&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$VS_TOOLS = &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$VS_PATH&lt;span style="color:#e6db74">\VC\Auxiliary\Build&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> (Test-Path &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$VS_TOOLS&lt;span style="color:#e6db74">\vcvarsall.bat&amp;#34;&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Write-Host &lt;span style="color:#e6db74">&amp;#34;Setting up Visual Studio environment...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># x64 환경 설정&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cmd.exe /c &lt;span style="color:#e6db74">&amp;#34;call &lt;/span>&lt;span style="color:#ae81ff">`&amp;#34;&lt;/span>$VS_TOOLS&lt;span style="color:#e6db74">\vcvarsall.bat&lt;/span>&lt;span style="color:#ae81ff">`&amp;#34;&lt;/span>&lt;span style="color:#e6db74"> x64 &amp;amp;&amp;amp; set &amp;gt; %temp%\vcvars.txt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Get-Content &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$env:temp&lt;span style="color:#e6db74">\vcvars.txt&amp;#34;&lt;/span> | foreach-object {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> ($_ &lt;span style="color:#f92672">-match&lt;/span> &lt;span style="color:#e6db74">&amp;#34;^(.*?)=(.*)$&amp;#34;&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Set-Content &lt;span style="color:#e6db74">&amp;#34;env:\&lt;/span>$($matches[&lt;span style="color:#ae81ff">1&lt;/span>])&lt;span style="color:#e6db74">&amp;#34;&lt;/span> $matches[&lt;span style="color:#ae81ff">2&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>} &lt;span style="color:#66d9ef">else&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Write-Error &lt;span style="color:#e6db74">&amp;#34;Visual Studio environment setup failed&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> exit &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Build for x64&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Write-Host &lt;span style="color:#e6db74">&amp;#34;Building for x64...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Build-OpenCV -arch &lt;span style="color:#e6db74">&amp;#34;x64&amp;#34;&lt;/span> -generator &lt;span style="color:#e6db74">&amp;#34;Visual Studio 17 2022&amp;#34;&lt;/span> -platform &lt;span style="color:#e6db74">&amp;#34;x64&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ARM64 빌드 전 환경 재설정&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> (Test-Path &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$VS_TOOLS&lt;span style="color:#e6db74">\vcvarsall.bat&amp;#34;&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Write-Host &lt;span style="color:#e6db74">&amp;#34;Setting up Visual Studio environment for ARM64...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cmd.exe /c &lt;span style="color:#e6db74">&amp;#34;call &lt;/span>&lt;span style="color:#ae81ff">`&amp;#34;&lt;/span>$VS_TOOLS&lt;span style="color:#e6db74">\vcvarsall.bat&lt;/span>&lt;span style="color:#ae81ff">`&amp;#34;&lt;/span>&lt;span style="color:#e6db74"> x64_arm64 &amp;amp;&amp;amp; set &amp;gt; %temp%\vcvars.txt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Get-Content &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$env:temp&lt;span style="color:#e6db74">\vcvars.txt&amp;#34;&lt;/span> | foreach-object {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> ($_ &lt;span style="color:#f92672">-match&lt;/span> &lt;span style="color:#e6db74">&amp;#34;^(.*?)=(.*)$&amp;#34;&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Set-Content &lt;span style="color:#e6db74">&amp;#34;env:\&lt;/span>$($matches[&lt;span style="color:#ae81ff">1&lt;/span>])&lt;span style="color:#e6db74">&amp;#34;&lt;/span> $matches[&lt;span style="color:#ae81ff">2&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Build for ARM64&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Write-Host &lt;span style="color:#e6db74">&amp;#34;Building for ARM64...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Build-OpenCV -arch &lt;span style="color:#e6db74">&amp;#34;arm64&amp;#34;&lt;/span> -generator &lt;span style="color:#e6db74">&amp;#34;Visual Studio 17 2022&amp;#34;&lt;/span> -platform &lt;span style="color:#e6db74">&amp;#34;ARM64&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>주요 변경사항과 해결방법:&lt;/p></description></item></channel></rss>