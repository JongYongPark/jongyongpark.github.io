---
title: "Apt proxy issue"
date: 2025-03-14
categories: ["SDLC"]
tags: ["apt","ubuntu"]
---



# Apt proxy issue 

Ubuntu에서 발생한 APT 업데이트 문제의 원인과 해결 방법을 정리해드리겠습니다.

## 문제 원인

1. APT(Advanced Package Tool)가 패키지 정보를 업데이트하려 할 때 프록시 서버(10.4.241.231:3142)를 통해 연결을 시도했습니다.
2. 해당 프록시 서버에 연결할 수 없어 모든 저장소에 대한 연결이 타임아웃되었습니다.
3. 문제는 `/etc/apt/apt.conf` 파일에 설정된 프록시 설정이었습니다. 이 설정은 APT가 인터넷에 직접 연결하지 않고 프록시 서버를 통해 연결하도록 지시합니다.

## 진단 과정

1. 프록시 설정 확인:
   ```
   cat /etc/apt/apt.conf.d/* | grep -i proxy
   ```
   이 명령어로는 apt.conf.d 디렉토리 내의 파일들에서 프록시 설정을 찾을 수 없었습니다.

2. 시스템 전체에서 문제의 IP 주소를 포함하는 APT 관련 파일 검색:
   ```
   sudo find /etc/apt -type f -exec grep -l "10.4.241.231" {} \;
   ```
   이 명령어를 통해 `/etc/apt/apt.conf` 파일에 해당 IP 주소가 포함되어 있음을 확인했습니다.

## 해결 방법

1. `/etc/apt/apt.conf` 파일을 확인하여 프록시 설정을 찾았습니다.
2. 이 파일을 편집하여 프록시 설정을 제거하거나 직접 연결을 사용하도록 변경했습니다.
3. 변경 후 `sudo apt update` 명령어를 실행하여 APT가 이제 인터넷에 직접 연결하도록 했습니다.

## 교훈

1. APT 업데이트 문제가 발생하면 프록시 설정을 확인하는 것이 중요합니다.
2. 프록시 설정은 `/etc/apt/apt.conf.d/` 디렉토리뿐만 아니라 `/etc/apt/apt.conf` 파일에도 있을 수 있습니다.
3. 특히 회사나 학교 네트워크에서 작업하다가 집이나 다른 네트워크로 이동한 경우, 프록시 설정으로 인한 문제가
 발생할 수 있습니다.
4. `find` 명령어와 `grep`을 조합하여 문제가 있는 설정 파일을 효과적으로 찾을 수 있습니다.

이와 같은 방법으로 APT 업데이트 시 발생하는 프록시 관련 문제를 진단하고 해결할 수 있습니다.